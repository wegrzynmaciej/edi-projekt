<html>

<head>
    <title>Projekt EDI</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="scripts.js"></script>
    <!-- Step 1) Load D3.js -->
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <!-- Step 2) Load billboard.js with style -->
    <script src="billboard.min.js"></script>

    <!-- Load with base style -->
    <link rel="stylesheet" href="billboard.min.css">

    <!-- Or load different theme style -->
    <link rel="stylesheet" href="insight.min.css">
</head>

<body>
    <div id="chart"></div>

    <script>
        // Deklaracja słownika walut
        var currencies = {};
        $(document).ready(function () {
            // URL z api NBP żeby wyciągnąć symbole i nazwy walut
            var url_symbols = 'http://api.nbp.pl/api/exchangerates/tables/C';

            $.ajax({
                url: url_symbols,
                dataType: 'json',
                async: false,
                success: function (result) {

                    let rates = result[0]['rates'];
                    // Populacja słownika
                    rates.forEach(element => {
                        let name = element['currency'];
                        let symbol = element['code'];
                        currencies[symbol] = {
                            'name': name,
                            'months': {}
                        };
                        for (let x = 1; x <= 12; x++) {
                            currencies[symbol]['months'][x] = { 'bid': 0, 'ask': 0 }
                        };

                    });
                    // Wywołanie funkcji pobierającej średnią wartość kupna i sprzedaży walut z tabeli C dla każego miesiąca w 2019 roku
                    for (let x = 1; x <= 12; x++) {
                        get_nbp_data_month(x, currencies);
                    }


                }
            });

        });
    </script>

</body>

</html>